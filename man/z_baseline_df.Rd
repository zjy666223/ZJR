% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/z_baseline.R
\name{z_baseline_df}
\alias{z_baseline_df}
\title{基线表（单一数据框 + 汇总列）}
\usage{
z_baseline_df(
  data,
  baseline_define,
  group_names,
  output_name = "基线表.csv",
  max_cat_levels = 10,
  digits = 2,
  percent_digits = 2,
  count_digits = 2,
  include_missing = FALSE,
  csv_encoding = "UTF-8"
)
}
\arguments{
\item{data}{\code{data.frame}，已包含所有待统计变量与分组列（如 \code{d}）。}

\item{baseline_define}{\code{character}，要进入基线表的变量名向量（按此顺序输出）。}

\item{group_names}{\code{character(1)}，分组列名（例："AR_status"）。}

\item{output_name}{\code{character}，导出文件名（CSV）。设为空串可仅返回数据框。}

\item{max_cat_levels}{\code{numeric}，数值型变量若\strong{非缺失唯一值数} ≤ 该阈值，则按\strong{分类}处理。}

\item{digits}{连续变量数值小数位。}

\item{percent_digits}{百分比小数位。}

\item{count_digits}{计数保留小数位（为与示例一致，默认 2）。}

\item{include_missing}{\code{logical}，分类变量是否额外加入“Missing”一行（百分比置空）。}

\item{csv_encoding}{CSV 文件编码。}
}
\value{
\code{data.frame}：格式化后的基线表；若 \code{output_name} 非空，同时写出 CSV。
}
\description{
从一个已合并的数据框 \code{data} 生成基线特征表：自动识别\strong{连续/分类}变量；
连续变量显示 \strong{Median (Q1, Q3)}；分类变量显示 \strong{n (\%)}；
输出包含 \strong{Total population} 汇总列与每个分组列，并可导出 CSV。
}
\details{
\itemize{
\item 汇总列标题：\code{"Total population\\nN = <总样本>¹"}；各组：\code{"<组别>\\nN = <组内样本>¹"}。
\item 分类变量的百分比分母为\strong{该变量在该组的非缺失数}。
\item 连续变量分位数使用 \code{quantile(..., type = 2)}。
}
}
\section{用法}{

z_baseline_df(
data,
baseline_define,
group_names,
output_name = "基线表.csv",
max_cat_levels = 10,
digits = 2,
percent_digits = 2,
count_digits = 2,
include_missing = FALSE,
csv_encoding = "UTF-8"
)
}

\examples{
# 示例：直接调用生成“基线表.csv”
tbl <- z_baseline_df(
  data = d,
  baseline_define = c(
    "age","gender","ethnicity","BMI","education","smoking_status",
    "drinking_status","physical_activity","score_diet","household_income",
    "discoast","tdi","hypertension","diabetes","asthma","sleep_cat","twa_benzene"
  ),
  group_names = "AR_status",
  output_name = "基线表.csv"
)

}
